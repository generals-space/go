# 内存初始化流程

```
runtime·mallocinit
        |
        ├── runtime·InitSizes [初始化用于分配小对象的span的size <-> class映射表]
        |
        ├── runtime·MHeap_Init []
        |          |
        |          |
        |          ├── runtime·FixAlloc_Init(&mheap->spanalloc) []
        |          |
        |          ├── runtime·FixAlloc_Init(&mheap->cachealloc) []
        |          |
        |          ├── runtime·MSpanList_Init(&mheap->free) [初始化为空的双向链表, free是一个256个成员的数组, 即可容纳256个双向链表]
        |          |
        |          ├── runtime·MSpanList_Init(&mheap->large) [初始化为空的双向链表, ...large只有一个]
        |          |
        |          ├── runtime·MCentral_Init(&mheap->central) [为]
        |                          |
        |                          |
        |                          ├── runtime·MSpanList_Init(&mcentral->nonempty) [初始化为空的双向链表]
        |                          |
        |                          ├── runtime·MSpanList_Init(&mcentral->empty) [初始化为空的双向链表]
        |
        ├── runtime·allocmcache []
        |            |
        |            |
        |            ├── runtime·FixAlloc_Alloc(mheap.cachealloc) [为mheap->mcahce分配空间]
        |
```
